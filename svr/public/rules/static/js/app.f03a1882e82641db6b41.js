webpackJsonp([1],{103:function(t,e,n){"use strict";function o(t,e){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function i(t){new c.a({layout:"center",timeout:3e3,text:t}).show()}function a(t,e,n){var o=new c.a({text:t,buttons:[c.a.button("确定","btn btn-success",function(){e&&e()},{id:"button1","data-status":"ok"}),c.a.button("取消","btn btn-error",function(){n&&n(),o.close()})]}).show()}var r=n(398),c=n.n(r);e.a={download_text:o,show_noty:i,show_confirm:a}},157:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(154),i=n(412),a=n.n(i),r=n(392),c=(n.n(r),n(406)),l=n.n(c),s=n(163);n(70);o.a.use(a.a),o.a.config.productionTip=!1,window.vm=new o.a({el:"#app",router:s.a,template:"<App/>",components:{App:l.a}})},161:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(103),i=n(70);e.default={data:function(){return{token:"",mch:{name:"",wx_id:"",aly_id:""},clipped:!1,drawer:!0,fixed:!1,items:[{icon:"bubble_chart",title:"商户列表"}],miniVariant:!1,right:!0,rightDrawer:!1,title:"智慧旅游支付平台"}},methods:{clear:function(){this.mch={name:"",wx_id:"",aly_id:""},this.token=""},is_filled:function(){return this.mch.name&&(this.mch.wx_id||this.mch.aly_id)},download_token:function(){this.token?(o.a.download_text(this.mch.name+".txt",this.token),o.a.show_noty("已下载商户token")):o.a.show_noty("token 为空")},gen_token:function(){var t=this;this.is_filled()?i.a.emit("req_token",this.mch,function(e){t.token=e}):o.a.show_noty("请填写商户信息")},add_mch:function(){this.is_filled()?(i.a.emit("add_mch",this.mch),this.clear()):o.a.show_noty("请填写商户信息")}}}},162:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(399),i=n.n(o),a=n(70),r=n(103);e.default={name:"HomePage",data:function(){return{mchs:[{name:"蔡伦竹海",wx_id:"123423414124",aly_id:"9989887776767"}],info:"",wi:{openid:"",nickname:"",sex:"",language:"",city:"",province:"",country:"",headimgurl:""}}},computed:{mp_nickname:function(){return wi.nickname}},created:function(){var t=this;this.$root.$on("mch_changed",function(e){t.get_mchs()}),this.$root.$on("pay_result",function(t){r.a.show_noty(t.body+",价格"+t.total_fee+"分，支付成功")})},methods:{wx_qr:function(t){if(!t.body||!t.total_fee)return r.a.show_noty("请填写名称/价格");a.a.emit("req_token",t,function(e){var n={body:t.body,total_fee:t.total_fee,token:e};a.a.emit("req_wxpay_qr",n,function(e){console.log(e);new i.a({element:document.getElementById(t._id),size:200,value:e.code_url})})})},aly_qr:function(t){new i.a({element:document.getElementById(t._id),foreground:"purple",size:200,value:"https://github.com/neocotic/qrious"})},get_mchs:function(){var t=this;a.a.emit("get_mchs","",function(e){t.mchs=e})},del_mch:function(t){a.a.emit("del_mch",t)},mod_mch:function(t){a.a.emit("mod_mch",t)},download_token:function(t){a.a.emit("req_token",t,function(e){r.a.download_text(t.name+".txt",e)})}},mounted:function(){this.get_mchs()}}},163:function(t,e,n){"use strict";var o=n(154),i=n(410),a=n(407),r=n.n(a);o.a.use(i.a),e.a=new i.a({routes:[{path:"/",name:"Home",component:r.a}]})},392:function(t,e){},393:function(t,e){},394:function(t,e){},406:function(t,e,n){function o(t){n(394)}var i=n(153)(n(161),n(409),o,null,null);t.exports=i.exports},407:function(t,e,n){function o(t){n(393)}var i=n(153)(n(162),n(408),o,"data-v-06aec8f7",null);t.exports=i.exports},408:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-slide-y-transition",{attrs:{mode:"out-in"}},[n("v-layout",{attrs:{column:"","align-center":""}},[n("v-container",{staticStyle:{"min-height":"0"},attrs:{fluid:"","grid-list-lg":""}},[n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.mchs,function(e){return n("v-layout",{attrs:{row:"",wrap:"",xs6:""}},[n("v-card",{staticClass:"white--text",attrs:{xs6:"",color:"cyan darken-2"}},[n("v-layout",{attrs:{row:""}},[n("v-flex",[n("v-text-field",{attrs:{label:"商户名称"},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"m.name"}})],1)],1),t._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",[n("v-text-field",{attrs:{label:"微信ID"},model:{value:e.wx_id,callback:function(n){t.$set(e,"wx_id",n)},expression:"m.wx_id"}})],1)],1),t._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",[n("v-text-field",{attrs:{label:"支付宝ID"},model:{value:e.aly_id,callback:function(n){t.$set(e,"aly_id",n)},expression:"m.aly_id"}})],1)],1),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{flat:"",dark:""},on:{click:function(n){n.preventDefault(),t.download_token(e)}}},[t._v("下载token")]),t._v(" "),n("v-btn",{attrs:{color:"error"},on:{click:function(n){n.preventDefault(),t.del_mch(e)}}},[t._v("删除")]),t._v(" "),n("v-btn",{attrs:{color:"info"},on:{click:function(n){n.preventDefault(),t.mod_mch(e)}}},[t._v("修改")])],1)],1),t._v(" "),n("v-card",{staticClass:"white--text",attrs:{xs6:"",color:"cyan darken-1"}},[n("v-layout",{attrs:{row:""}},[n("v-flex",[n("v-text-field",{attrs:{label:"商品名称"},model:{value:e.body,callback:function(n){t.$set(e,"body",n)},expression:"m.body"}})],1)],1),t._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",[n("v-text-field",{attrs:{label:"价格(分)"},model:{value:e.total_fee,callback:function(n){t.$set(e,"total_fee",n)},expression:"m.total_fee"}})],1)],1),t._v(" "),n("v-layout",{attrs:{column:"","align-center":""}},[n("canvas",{staticStyle:{width:"200px",height:"200px"},attrs:{id:e._id}})]),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"orange"},on:{click:function(n){n.preventDefault(),t.wx_qr(e)}}},[t._v("微信扫码")]),t._v(" "),n("v-btn",{attrs:{color:"pink",disabled:""},on:{click:function(n){n.preventDefault(),t.aly_qr(e)}}},[t._v("支付宝扫码")])],1)],1)],1)}))],1)],1)],1)],1)},staticRenderFns:[]}},409:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{light:""}},[n("v-navigation-drawer",{attrs:{fixed:"","mini-variant":t.miniVariant,clipped:t.clipped,app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",t._l(t.items,function(e,o){return n("v-list-tile",{key:o,attrs:{value:"true",exact:""}},[n("v-list-tile-action",[n("v-icon",{attrs:{light:""},domProps:{innerHTML:t._s(e.icon)}})],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",{domProps:{textContent:t._s(e.title)}})],1)],1)}))],1),t._v(" "),n("v-toolbar",{attrs:{fixed:"",app:"","clipped-left":t.clipped}},[n("v-toolbar-side-icon",{attrs:{light:""},on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),n("v-btn",{attrs:{icon:"",light:""},on:{click:function(e){e.stopPropagation(),t.miniVariant=!t.miniVariant}}},[n("v-icon",{domProps:{innerHTML:t._s(t.miniVariant?"chevron_right":"chevron_left")}})],1),t._v(" "),n("v-btn",{attrs:{icon:"",light:""},on:{click:function(e){e.stopPropagation(),t.clipped=!t.clipped}}},[n("v-icon",[t._v("web")])],1),t._v(" "),n("v-btn",{attrs:{icon:"",light:""},on:{click:function(e){e.stopPropagation(),t.fixed=!t.fixed}}},[n("v-icon",[t._v("remove")])],1),t._v(" "),n("v-toolbar-title",{domProps:{textContent:t._s(t.title)}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:"",light:""},on:{click:function(e){e.stopPropagation(),t.rightDrawer=!t.rightDrawer}}},[n("v-icon",[t._v("add")])],1)],1),t._v(" "),n("v-content",[n("router-view")],1),t._v(" "),n("v-navigation-drawer",{attrs:{temporary:"",right:t.right,fixed:""},model:{value:t.rightDrawer,callback:function(e){t.rightDrawer=e},expression:"rightDrawer"}},[n("v-container",{attrs:{fluid:""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs10:""}},[n("v-text-field",{attrs:{label:"商户名称"},model:{value:t.mch.name,callback:function(e){t.$set(t.mch,"name",e)},expression:"mch.name"}})],1)],1),t._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs10:""}},[n("v-text-field",{attrs:{label:"微信ID"},model:{value:t.mch.wx_id,callback:function(e){t.$set(t.mch,"wx_id",e)},expression:"mch.wx_id"}})],1)],1),t._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs10:""}},[n("v-text-field",{attrs:{label:"支付宝ID"},model:{value:t.mch.aly_id,callback:function(e){t.$set(t.mch,"aly_id",e)},expression:"mch.aly_id"}})],1)],1),t._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs10:""}},[n("v-text-field",{attrs:{label:"token","multi-line":""},model:{value:t.token,callback:function(e){t.token=e},expression:"token"}})],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-layout",{attrs:{row:""}},[n("v-btn",{attrs:{color:"success"},on:{click:function(e){e.preventDefault(),t.gen_token(e)}}},[t._v("生成token")]),t._v(" "),n("v-btn",{attrs:{color:"info"},on:{click:function(e){e.preventDefault(),t.add_mch(e)}}},[t._v("添加商户")])],1)],1)],1),t._v(" "),n("v-footer",{attrs:{fixed:t.fixed,app:""}},[n("span",[t._v("© freego 2018")])])],1)},staticRenderFns:[]}},413:function(t,e){},414:function(t,e,n){n(158),t.exports=n(157)},70:function(t,e,n){"use strict";var o=n(165),i=n.n(o),a=n(167),r=n.n(a),c=n(168),l=n.n(c),s=n(401),u=n.n(s),d=n(396),v=(n.n(d),function(){function t(){r()(this,t),this.sock=u()(),this.sock.on("connect",this.on_connect.bind(this)),this.sock.on("mch_changed",this.on_mch_changed.bind(this)),this.sock.on("pay_result",this.on_pay_result.bind(this))}return l()(t,[{key:"register_ui_evt",value:function(){var t=this;vm.$on("notify_seller_status",function(e){t.emit("notify_seller_status",e)})}},{key:"on_connect",value:function(){this.register_ui_evt(),console.log("on_connect to socket.io server")}},{key:"get_orders",value:function(t,e){this.emit("get_orders",t,function(t){e(t)})}},{key:"emit",value:function(t,e,n){this.sock&&this.sock.emit(t,e,n)}},{key:"on_mch_changed",value:function(t){window.vm.$emit("mch_changed",t)}},{key:"on_pay_result",value:function(t){console.log("支付通知："+i()(t)),window.vm.$emit("pay_result",t)}}]),t}());e.a=new v}},[414]);
//# sourceMappingURL=app.f03a1882e82641db6b41.js.map